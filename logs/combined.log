{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸ”„ Applying OhMyApp.io support migration...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN customer_address TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN payment_amount REAL DEFAULT 0...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN source TEXT DEFAULT 'api'...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_metadata TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN original_order_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_created_at TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_items ADD COLUMN category TEXT DEFAULT 'General'...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN modifier_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN quantity INTEGER DEFAULT 1...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source ON orders(source)...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_original_order_id ON orders(original_order...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source_created ON orders(source, created_a...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"0":{"cid":0,"dflt_value":"lower(hex(randomblob(16)))","name":"id","notnull":0,"pk":1,"type":"TEXT"},"1":{"cid":1,"dflt_value":null,"name":"order_id","notnull":1,"pk":0,"type":"TEXT"},"10":{"cid":10,"dflt_value":null,"name":"requested_time","notnull":0,"pk":0,"type":"TEXT"},"11":{"cid":11,"dflt_value":null,"name":"subtotal","notnull":1,"pk":0,"type":"REAL"},"12":{"cid":12,"dflt_value":null,"name":"tax","notnull":1,"pk":0,"type":"REAL"},"13":{"cid":13,"dflt_value":"0","name":"tip","notnull":0,"pk":0,"type":"REAL"},"14":{"cid":14,"dflt_value":"0","name":"discount","notnull":0,"pk":0,"type":"REAL"},"15":{"cid":15,"dflt_value":"0","name":"delivery_fee","notnull":0,"pk":0,"type":"REAL"},"16":{"cid":16,"dflt_value":null,"name":"total","notnull":1,"pk":0,"type":"REAL"},"17":{"cid":17,"dflt_value":null,"name":"payment_method","notnull":0,"pk":0,"type":"TEXT"},"18":{"cid":18,"dflt_value":"'pending'","name":"payment_status","notnull":0,"pk":0,"type":"TEXT"},"19":{"cid":19,"dflt_value":null,"name":"payment_transaction_id","notnull":0,"pk":0,"type":"TEXT"},"2":{"cid":2,"dflt_value":null,"name":"external_order_id","notnull":1,"pk":0,"type":"TEXT"},"20":{"cid":20,"dflt_value":"'received'","name":"status","notnull":0,"pk":0,"type":"TEXT"},"21":{"cid":21,"dflt_value":null,"name":"estimated_time","notnull":0,"pk":0,"type":"TEXT"},"22":{"cid":22,"dflt_value":null,"name":"cancellation_reason","notnull":0,"pk":0,"type":"TEXT"},"23":{"cid":23,"dflt_value":null,"name":"notes","notnull":0,"pk":0,"type":"TEXT"},"24":{"cid":24,"dflt_value":"datetime('now')","name":"created_at","notnull":0,"pk":0,"type":"TEXT"},"25":{"cid":25,"dflt_value":"datetime('now')","name":"updated_at","notnull":0,"pk":0,"type":"TEXT"},"26":{"cid":26,"dflt_value":null,"name":"customer_address","notnull":0,"pk":0,"type":"TEXT"},"27":{"cid":27,"dflt_value":"0","name":"payment_amount","notnull":0,"pk":0,"type":"REAL"},"28":{"cid":28,"dflt_value":"'api'","name":"source","notnull":0,"pk":0,"type":"TEXT"},"29":{"cid":29,"dflt_value":null,"name":"webhook_metadata","notnull":0,"pk":0,"type":"TEXT"},"3":{"cid":3,"dflt_value":null,"name":"restaurant_id","notnull":1,"pk":0,"type":"TEXT"},"30":{"cid":30,"dflt_value":null,"name":"original_order_id","notnull":0,"pk":0,"type":"TEXT"},"31":{"cid":31,"dflt_value":null,"name":"webhook_created_at","notnull":0,"pk":0,"type":"TEXT"},"4":{"cid":4,"dflt_value":null,"name":"idempotency_key","notnull":1,"pk":0,"type":"TEXT"},"5":{"cid":5,"dflt_value":null,"name":"customer_name","notnull":1,"pk":0,"type":"TEXT"},"6":{"cid":6,"dflt_value":null,"name":"customer_phone","notnull":1,"pk":0,"type":"TEXT"},"7":{"cid":7,"dflt_value":null,"name":"customer_email","notnull":0,"pk":0,"type":"TEXT"},"8":{"cid":8,"dflt_value":null,"name":"order_type","notnull":1,"pk":0,"type":"TEXT"},"9":{"cid":9,"dflt_value":null,"name":"order_time","notnull":1,"pk":0,"type":"TEXT"},"level":"info","message":"ðŸ“‹ Final orders table structure:","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸŽ‰ OhMyApp.io migration completed successfully!","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸ§ª Testing new database structure...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âœ… All new order columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âœ… order_items.category column is present","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âœ… All new order_item_modifiers columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸŽ¯ Database structure test completed!","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"âœ… Database migration completed","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸš€ Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸ“– API Index: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸ’“ Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸŒ Environment: development","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"ðŸŽ£ OhMyApp.io webhook support: ENABLED","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:03"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:04"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-11-06 19:44:04"}
{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"ðŸ”„ Applying OhMyApp.io support migration...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN customer_address TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN payment_amount REAL DEFAULT 0...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN source TEXT DEFAULT 'api'...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_metadata TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN original_order_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_created_at TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_items ADD COLUMN category TEXT DEFAULT 'General'...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN modifier_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN quantity INTEGER DEFAULT 1...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:28"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source ON orders(source)...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_original_order_id ON orders(original_order...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source_created ON orders(source, created_a...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"0":{"cid":0,"dflt_value":"lower(hex(randomblob(16)))","name":"id","notnull":0,"pk":1,"type":"TEXT"},"1":{"cid":1,"dflt_value":null,"name":"order_id","notnull":1,"pk":0,"type":"TEXT"},"10":{"cid":10,"dflt_value":null,"name":"requested_time","notnull":0,"pk":0,"type":"TEXT"},"11":{"cid":11,"dflt_value":null,"name":"subtotal","notnull":1,"pk":0,"type":"REAL"},"12":{"cid":12,"dflt_value":null,"name":"tax","notnull":1,"pk":0,"type":"REAL"},"13":{"cid":13,"dflt_value":"0","name":"tip","notnull":0,"pk":0,"type":"REAL"},"14":{"cid":14,"dflt_value":"0","name":"discount","notnull":0,"pk":0,"type":"REAL"},"15":{"cid":15,"dflt_value":"0","name":"delivery_fee","notnull":0,"pk":0,"type":"REAL"},"16":{"cid":16,"dflt_value":null,"name":"total","notnull":1,"pk":0,"type":"REAL"},"17":{"cid":17,"dflt_value":null,"name":"payment_method","notnull":0,"pk":0,"type":"TEXT"},"18":{"cid":18,"dflt_value":"'pending'","name":"payment_status","notnull":0,"pk":0,"type":"TEXT"},"19":{"cid":19,"dflt_value":null,"name":"payment_transaction_id","notnull":0,"pk":0,"type":"TEXT"},"2":{"cid":2,"dflt_value":null,"name":"external_order_id","notnull":1,"pk":0,"type":"TEXT"},"20":{"cid":20,"dflt_value":"'received'","name":"status","notnull":0,"pk":0,"type":"TEXT"},"21":{"cid":21,"dflt_value":null,"name":"estimated_time","notnull":0,"pk":0,"type":"TEXT"},"22":{"cid":22,"dflt_value":null,"name":"cancellation_reason","notnull":0,"pk":0,"type":"TEXT"},"23":{"cid":23,"dflt_value":null,"name":"notes","notnull":0,"pk":0,"type":"TEXT"},"24":{"cid":24,"dflt_value":"datetime('now')","name":"created_at","notnull":0,"pk":0,"type":"TEXT"},"25":{"cid":25,"dflt_value":"datetime('now')","name":"updated_at","notnull":0,"pk":0,"type":"TEXT"},"26":{"cid":26,"dflt_value":null,"name":"customer_address","notnull":0,"pk":0,"type":"TEXT"},"27":{"cid":27,"dflt_value":"0","name":"payment_amount","notnull":0,"pk":0,"type":"REAL"},"28":{"cid":28,"dflt_value":"'api'","name":"source","notnull":0,"pk":0,"type":"TEXT"},"29":{"cid":29,"dflt_value":null,"name":"webhook_metadata","notnull":0,"pk":0,"type":"TEXT"},"3":{"cid":3,"dflt_value":null,"name":"restaurant_id","notnull":1,"pk":0,"type":"TEXT"},"30":{"cid":30,"dflt_value":null,"name":"original_order_id","notnull":0,"pk":0,"type":"TEXT"},"31":{"cid":31,"dflt_value":null,"name":"webhook_created_at","notnull":0,"pk":0,"type":"TEXT"},"4":{"cid":4,"dflt_value":null,"name":"idempotency_key","notnull":1,"pk":0,"type":"TEXT"},"5":{"cid":5,"dflt_value":null,"name":"customer_name","notnull":1,"pk":0,"type":"TEXT"},"6":{"cid":6,"dflt_value":null,"name":"customer_phone","notnull":1,"pk":0,"type":"TEXT"},"7":{"cid":7,"dflt_value":null,"name":"customer_email","notnull":0,"pk":0,"type":"TEXT"},"8":{"cid":8,"dflt_value":null,"name":"order_type","notnull":1,"pk":0,"type":"TEXT"},"9":{"cid":9,"dflt_value":null,"name":"order_time","notnull":1,"pk":0,"type":"TEXT"},"level":"info","message":"ðŸ“‹ Final orders table structure:","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸŽ‰ OhMyApp.io migration completed successfully!","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸ§ª Testing new database structure...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"âœ… All new order columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"âœ… order_items.category column is present","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"âœ… All new order_item_modifiers columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸŽ¯ Database structure test completed!","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"âœ… Database migration completed","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸš€ Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸ“– API Index: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸ’“ Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸŒ Environment: development","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"ðŸŽ£ OhMyApp.io webhook support: ENABLED","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:40:29"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:44:33"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-11-07 19:44:33"}
{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸ”„ Applying OhMyApp.io support migration...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN customer_address TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN payment_amount REAL DEFAULT 0...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN source TEXT DEFAULT 'api'...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_metadata TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN original_order_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_created_at TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_items ADD COLUMN category TEXT DEFAULT 'General'...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN modifier_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN quantity INTEGER DEFAULT 1...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source ON orders(source)...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_original_order_id ON orders(original_order...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source_created ON orders(source, created_a...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"0":{"cid":0,"dflt_value":"lower(hex(randomblob(16)))","name":"id","notnull":0,"pk":1,"type":"TEXT"},"1":{"cid":1,"dflt_value":null,"name":"order_id","notnull":1,"pk":0,"type":"TEXT"},"10":{"cid":10,"dflt_value":null,"name":"requested_time","notnull":0,"pk":0,"type":"TEXT"},"11":{"cid":11,"dflt_value":null,"name":"subtotal","notnull":1,"pk":0,"type":"REAL"},"12":{"cid":12,"dflt_value":null,"name":"tax","notnull":1,"pk":0,"type":"REAL"},"13":{"cid":13,"dflt_value":"0","name":"tip","notnull":0,"pk":0,"type":"REAL"},"14":{"cid":14,"dflt_value":"0","name":"discount","notnull":0,"pk":0,"type":"REAL"},"15":{"cid":15,"dflt_value":"0","name":"delivery_fee","notnull":0,"pk":0,"type":"REAL"},"16":{"cid":16,"dflt_value":null,"name":"total","notnull":1,"pk":0,"type":"REAL"},"17":{"cid":17,"dflt_value":null,"name":"payment_method","notnull":0,"pk":0,"type":"TEXT"},"18":{"cid":18,"dflt_value":"'pending'","name":"payment_status","notnull":0,"pk":0,"type":"TEXT"},"19":{"cid":19,"dflt_value":null,"name":"payment_transaction_id","notnull":0,"pk":0,"type":"TEXT"},"2":{"cid":2,"dflt_value":null,"name":"external_order_id","notnull":1,"pk":0,"type":"TEXT"},"20":{"cid":20,"dflt_value":"'received'","name":"status","notnull":0,"pk":0,"type":"TEXT"},"21":{"cid":21,"dflt_value":null,"name":"estimated_time","notnull":0,"pk":0,"type":"TEXT"},"22":{"cid":22,"dflt_value":null,"name":"cancellation_reason","notnull":0,"pk":0,"type":"TEXT"},"23":{"cid":23,"dflt_value":null,"name":"notes","notnull":0,"pk":0,"type":"TEXT"},"24":{"cid":24,"dflt_value":"datetime('now')","name":"created_at","notnull":0,"pk":0,"type":"TEXT"},"25":{"cid":25,"dflt_value":"datetime('now')","name":"updated_at","notnull":0,"pk":0,"type":"TEXT"},"26":{"cid":26,"dflt_value":null,"name":"customer_address","notnull":0,"pk":0,"type":"TEXT"},"27":{"cid":27,"dflt_value":"0","name":"payment_amount","notnull":0,"pk":0,"type":"REAL"},"28":{"cid":28,"dflt_value":"'api'","name":"source","notnull":0,"pk":0,"type":"TEXT"},"29":{"cid":29,"dflt_value":null,"name":"webhook_metadata","notnull":0,"pk":0,"type":"TEXT"},"3":{"cid":3,"dflt_value":null,"name":"restaurant_id","notnull":1,"pk":0,"type":"TEXT"},"30":{"cid":30,"dflt_value":null,"name":"original_order_id","notnull":0,"pk":0,"type":"TEXT"},"31":{"cid":31,"dflt_value":null,"name":"webhook_created_at","notnull":0,"pk":0,"type":"TEXT"},"4":{"cid":4,"dflt_value":null,"name":"idempotency_key","notnull":1,"pk":0,"type":"TEXT"},"5":{"cid":5,"dflt_value":null,"name":"customer_name","notnull":1,"pk":0,"type":"TEXT"},"6":{"cid":6,"dflt_value":null,"name":"customer_phone","notnull":1,"pk":0,"type":"TEXT"},"7":{"cid":7,"dflt_value":null,"name":"customer_email","notnull":0,"pk":0,"type":"TEXT"},"8":{"cid":8,"dflt_value":null,"name":"order_type","notnull":1,"pk":0,"type":"TEXT"},"9":{"cid":9,"dflt_value":null,"name":"order_time","notnull":1,"pk":0,"type":"TEXT"},"level":"info","message":"ðŸ“‹ Final orders table structure:","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸŽ‰ OhMyApp.io migration completed successfully!","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸ§ª Testing new database structure...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âœ… All new order columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âœ… order_items.category column is present","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âœ… All new order_item_modifiers columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸŽ¯ Database structure test completed!","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"âœ… Database migration completed","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸš€ Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸ“– API Index: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸ’“ Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸŒ Environment: development","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"ðŸŽ£ OhMyApp.io webhook support: ENABLED","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:43"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:47"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-11-07 20:23:47"}
{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸ”„ Applying OhMyApp.io support migration...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN customer_address TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN payment_amount REAL DEFAULT 0...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN source TEXT DEFAULT 'api'...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_metadata TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN original_order_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE orders ADD COLUMN webhook_created_at TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_items ADD COLUMN category TEXT DEFAULT 'General'...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN modifier_id TEXT...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âš ï¸ Skipped (already exists): ALTER TABLE order_item_modifiers ADD COLUMN quantity INTEGER DEFAULT 1...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source ON orders(source)...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_original_order_id ON orders(original_order...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âœ… Applied: CREATE INDEX IF NOT EXISTS idx_orders_source_created ON orders(source, created_a...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"0":{"cid":0,"dflt_value":"lower(hex(randomblob(16)))","name":"id","notnull":0,"pk":1,"type":"TEXT"},"1":{"cid":1,"dflt_value":null,"name":"order_id","notnull":1,"pk":0,"type":"TEXT"},"10":{"cid":10,"dflt_value":null,"name":"requested_time","notnull":0,"pk":0,"type":"TEXT"},"11":{"cid":11,"dflt_value":null,"name":"subtotal","notnull":1,"pk":0,"type":"REAL"},"12":{"cid":12,"dflt_value":null,"name":"tax","notnull":1,"pk":0,"type":"REAL"},"13":{"cid":13,"dflt_value":"0","name":"tip","notnull":0,"pk":0,"type":"REAL"},"14":{"cid":14,"dflt_value":"0","name":"discount","notnull":0,"pk":0,"type":"REAL"},"15":{"cid":15,"dflt_value":"0","name":"delivery_fee","notnull":0,"pk":0,"type":"REAL"},"16":{"cid":16,"dflt_value":null,"name":"total","notnull":1,"pk":0,"type":"REAL"},"17":{"cid":17,"dflt_value":null,"name":"payment_method","notnull":0,"pk":0,"type":"TEXT"},"18":{"cid":18,"dflt_value":"'pending'","name":"payment_status","notnull":0,"pk":0,"type":"TEXT"},"19":{"cid":19,"dflt_value":null,"name":"payment_transaction_id","notnull":0,"pk":0,"type":"TEXT"},"2":{"cid":2,"dflt_value":null,"name":"external_order_id","notnull":1,"pk":0,"type":"TEXT"},"20":{"cid":20,"dflt_value":"'received'","name":"status","notnull":0,"pk":0,"type":"TEXT"},"21":{"cid":21,"dflt_value":null,"name":"estimated_time","notnull":0,"pk":0,"type":"TEXT"},"22":{"cid":22,"dflt_value":null,"name":"cancellation_reason","notnull":0,"pk":0,"type":"TEXT"},"23":{"cid":23,"dflt_value":null,"name":"notes","notnull":0,"pk":0,"type":"TEXT"},"24":{"cid":24,"dflt_value":"datetime('now')","name":"created_at","notnull":0,"pk":0,"type":"TEXT"},"25":{"cid":25,"dflt_value":"datetime('now')","name":"updated_at","notnull":0,"pk":0,"type":"TEXT"},"26":{"cid":26,"dflt_value":null,"name":"customer_address","notnull":0,"pk":0,"type":"TEXT"},"27":{"cid":27,"dflt_value":"0","name":"payment_amount","notnull":0,"pk":0,"type":"REAL"},"28":{"cid":28,"dflt_value":"'api'","name":"source","notnull":0,"pk":0,"type":"TEXT"},"29":{"cid":29,"dflt_value":null,"name":"webhook_metadata","notnull":0,"pk":0,"type":"TEXT"},"3":{"cid":3,"dflt_value":null,"name":"restaurant_id","notnull":1,"pk":0,"type":"TEXT"},"30":{"cid":30,"dflt_value":null,"name":"original_order_id","notnull":0,"pk":0,"type":"TEXT"},"31":{"cid":31,"dflt_value":null,"name":"webhook_created_at","notnull":0,"pk":0,"type":"TEXT"},"4":{"cid":4,"dflt_value":null,"name":"idempotency_key","notnull":1,"pk":0,"type":"TEXT"},"5":{"cid":5,"dflt_value":null,"name":"customer_name","notnull":1,"pk":0,"type":"TEXT"},"6":{"cid":6,"dflt_value":null,"name":"customer_phone","notnull":1,"pk":0,"type":"TEXT"},"7":{"cid":7,"dflt_value":null,"name":"customer_email","notnull":0,"pk":0,"type":"TEXT"},"8":{"cid":8,"dflt_value":null,"name":"order_type","notnull":1,"pk":0,"type":"TEXT"},"9":{"cid":9,"dflt_value":null,"name":"order_time","notnull":1,"pk":0,"type":"TEXT"},"level":"info","message":"ðŸ“‹ Final orders table structure:","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸŽ‰ OhMyApp.io migration completed successfully!","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸ§ª Testing new database structure...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âœ… All new order columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âœ… order_items.category column is present","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âœ… All new order_item_modifiers columns are present","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸŽ¯ Database structure test completed!","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"âœ… Database migration completed","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸš€ Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸ“– API Index: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸ’“ Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸŒ Environment: development","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"ðŸŽ£ OhMyApp.io webhook support: ENABLED","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:26"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:50"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-11-10 21:52:50"}
{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"POST /api/v1/orders","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"apiKeyPrefix":"test-key...","ip":"::ffff:127.0.0.1","level":"warn","message":"Authentication failed: Invalid API key","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"POST /api/v1/payloads","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to save payload: SQLITE_ERROR: no such table: saved_payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads","timestamp":"2025-11-11 05:19:54"}
{"body":{"description":"Jest test payload","key":"jest_sample_1762838394451","payload":{"foo":"bar","n":42},"source":"jest"},"error":"SQLITE_ERROR: no such table: saved_payloads","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"POST","path":"/api/v1/payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads","timestamp":"2025-11-11 05:19:54"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"POST /api/v1/orders","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"apiKeyPrefix":"test-key...","ip":"::ffff:127.0.0.1","level":"warn","message":"Authentication failed: Invalid API key","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"GET /api/v1/payloads/jest_sample_1762838394451","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/jest_sample_1762838394451","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to load payload: SQLITE_ERROR: no such table: saved_payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT id, payload_key, description, source, payload, created_at, updated_at FROM saved_payloads WHERE payload_key = ?', [ 'jest_sample_1762838394451' ], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as getByKeyOrId] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:41:35)\n    at PayloadController.getByKeyOrId (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:33:43)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:19:54"}
{"body":{},"error":"SQLITE_ERROR: no such table: saved_payloads","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"GET","path":"/api/v1/payloads/jest_sample_1762838394451","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT id, payload_key, description, source, payload, created_at, updated_at FROM saved_payloads WHERE payload_key = ?', [ 'jest_sample_1762838394451' ], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as getByKeyOrId] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:41:35)\n    at PayloadController.getByKeyOrId (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:33:43)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:19:54"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"GET /api/v1/payloads","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:19:54"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to list payloads: SQLITE_ERROR: no such table: saved_payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT COUNT(*) as total FROM saved_payloads ', [], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as list] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:76:34)\n    at PayloadController.list (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:48:41)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:19:54"}
{"body":{},"error":"SQLITE_ERROR: no such table: saved_payloads","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"GET","path":"/api/v1/payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT COUNT(*) as total FROM saved_payloads ', [], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as list] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:76:34)\n    at PayloadController.list (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:48:41)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:19:54"}
{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:02"}
{"level":"info","message":"ðŸ”’ Proxy trust enabled for production deployment","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:02"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:02"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"POST /api/v1/payloads","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"level":"info","message":"ðŸ—„ï¸ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:02"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"POST /api/v1/orders","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"apiKeyPrefix":"test-key...","ip":"::ffff:127.0.0.1","level":"warn","message":"Authentication failed: Invalid API key","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to save payload: SQLITE_ERROR: no such table: saved_payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads","timestamp":"2025-11-11 05:53:03"}
{"body":{"description":"Jest test payload","key":"jest_sample_1762840382962","payload":{"foo":"bar","n":42},"source":"jest"},"error":"SQLITE_ERROR: no such table: saved_payloads","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"POST","path":"/api/v1/payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads","timestamp":"2025-11-11 05:53:03"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"POST /api/v1/orders","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"apiKeyPrefix":"test-key...","ip":"::ffff:127.0.0.1","level":"warn","message":"Authentication failed: Invalid API key","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"GET /api/v1/payloads/jest_sample_1762840382962","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/jest_sample_1762840382962","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to load payload: SQLITE_ERROR: no such table: saved_payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT id, payload_key, description, source, payload, created_at, updated_at FROM saved_payloads WHERE payload_key = ?', [ 'jest_sample_1762840382962' ], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as getByKeyOrId] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:41:35)\n    at PayloadController.getByKeyOrId (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:54:43)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:53:03"}
{"body":{},"error":"SQLITE_ERROR: no such table: saved_payloads","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"GET","path":"/api/v1/payloads/jest_sample_1762840382962","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT id, payload_key, description, source, payload, created_at, updated_at FROM saved_payloads WHERE payload_key = ?', [ 'jest_sample_1762840382962' ], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as getByKeyOrId] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:41:35)\n    at PayloadController.getByKeyOrId (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:54:43)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:53:03"}
{"ip":"::ffff:127.0.0.1","ips":[],"level":"info","message":"GET /api/v1/payloads","remoteAddress":"::ffff:127.0.0.1","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-11-11 05:53:03"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to list payloads: SQLITE_ERROR: no such table: saved_payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT COUNT(*) as total FROM saved_payloads ', [], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as list] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:76:34)\n    at PayloadController.list (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:69:41)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:53:03"}
{"body":{},"error":"SQLITE_ERROR: no such table: saved_payloads","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"GET","path":"/api/v1/payloads","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such table: saved_payloads\n--> in Database#all('SELECT COUNT(*) as total FROM saved_payloads ', [], [Function (anonymous)])\n    at all (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:16:8)\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:15:10)\n    at PayloadService.query [as list] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\payloadService.js:76:34)\n    at PayloadController.list (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\payloadController.js:69:41)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:68:5)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:46:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\server.js:107:3)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express-rate-limit\\dist\\index.cjs:691:5","timestamp":"2025-11-11 05:53:03"}
