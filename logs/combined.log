{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-08 17:40:29"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 00:05:52"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:23:31"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:28:24"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:28:24"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:28:24"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:28:24"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:28:24"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:32:33"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:32:33"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:32:53"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:32:53"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:32:53"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:32:53"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:32:53"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:39:34","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:40:46","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.104.3 Chrome/138.0.7204.235 Electron/37.3.1 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:48:11","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:58:40","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:00","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:00"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:00"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to get menu: SQLITE_ERROR: unrecognized token: \":\"","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: unrecognized token: \":\"\n--> in Database#all('\\n' +\n  '        SELECT \\n' +\n  '          m.*,\\n' +\n  '          COALESCE(\\n' +\n  '            json_agg(\\n' +\n  '              json_build_object(\\n' +\n  \"                'id', mi.id,\\n\" +\n  \"                'name', mi.name,\\n\" +\n  \"                'price', mi.price,\\n\" +\n  \"                'available', mi.available\\n\" +\n  '              )\\n' +\n  '            ) FILTER (WHERE mi.id IS NOT NULL),\\n' +\n  \"            '[]'::json\\n\" +\n  '          ) as items\\n' +\n  '        FROM menus m\\n' +\n  '        LEFT JOIN menu_items mi ON m.id = mi.menu_id AND mi.available = true\\n' +\n  '       WHERE m.restaurant_id = $1\\n' +\n  '        GROUP BY m.id, m.restaurant_id, m.name, m.description, m.version, m.last_updated, m.created_at\\n' +\n  '        ORDER BY m.restaurant_id, m.name\\n' +\n  '      ', [ 'NYC-DELI-001' ], [Function (anonymous)])\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:24:8\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:23:10)\n    at MenuService.getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\menuService.js:38:37)\n    at getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\menuController.js:15:38)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:84:5\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-10-09 08:59:00"}
{"body":{},"error":"SQLITE_ERROR: unrecognized token: \":\"","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"GET","path":"/api/v1/menu","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: unrecognized token: \":\"\n--> in Database#all('\\n' +\n  '        SELECT \\n' +\n  '          m.*,\\n' +\n  '          COALESCE(\\n' +\n  '            json_agg(\\n' +\n  '              json_build_object(\\n' +\n  \"                'id', mi.id,\\n\" +\n  \"                'name', mi.name,\\n\" +\n  \"                'price', mi.price,\\n\" +\n  \"                'available', mi.available\\n\" +\n  '              )\\n' +\n  '            ) FILTER (WHERE mi.id IS NOT NULL),\\n' +\n  \"            '[]'::json\\n\" +\n  '          ) as items\\n' +\n  '        FROM menus m\\n' +\n  '        LEFT JOIN menu_items mi ON m.id = mi.menu_id AND mi.available = true\\n' +\n  '       WHERE m.restaurant_id = $1\\n' +\n  '        GROUP BY m.id, m.restaurant_id, m.name, m.description, m.version, m.last_updated, m.created_at\\n' +\n  '        ORDER BY m.restaurant_id, m.name\\n' +\n  '      ', [ 'NYC-DELI-001' ], [Function (anonymous)])\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:24:8\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:23:10)\n    at MenuService.getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\menuService.js:38:37)\n    at getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\menuController.js:15:38)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:84:5\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-10-09 08:59:00","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:22","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:22"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:42","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:42"}
{"client":"Mobile App","externalOrderId":"TEST-001","itemCount":1,"level":"info","message":"Creating order ORD-20241009-001","orderId":"ORD-20241009-001","orderType":"pickup","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 08:59:42","total":14.03}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to create order: SQLITE_ERROR: no such function: NOW","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such function: NOW\n--> in Database#all('\\n' +\n  '        INSERT INTO orders (\\n' +\n  '          id, order_id, external_order_id, restaurant_id, idempotency_key,\\n' +\n  '          customer_name, customer_phone, customer_email,\\n' +\n  '          order_type, order_time, requested_time,\\n' +\n  '          subtotal, tax, tip, discount, delivery_fee, total,\\n' +\n  '          payment_method, payment_status, payment_transaction_id,\\n' +\n  '          notes, status, created_at, updated_at\\n' +\n  '        ) VALUES (\\n' +\n  '          $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, NOW(), NOW()\\n' +\n  '        ) RETURNING *\\n' +\n  '      ', [], [Function (anonymous)])\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:24:8\n    at new Promise (<anonymous>)\n    at query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:23:10)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:71:14)\n    at OrderService.createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\orderService.js:29:40)\n    at async createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\orderController.js:56:21)","timestamp":"2025-10-09 08:59:42"}
{"body":{"customer":{"name":"Test Customer","phone":"555-0123"},"externalOrderId":"TEST-001","items":[{"itemId":"SANDWICH-001","name":"Turkey Club","quantity":1,"totalPrice":12.99,"unitPrice":12.99}],"orderId":"ORD-20241009-001","orderTime":"2025-10-09T08:59:42Z","orderType":"pickup","restaurantId":"NYC-DELI-001","totals":{"subtotal":12.99,"tax":1.04,"total":14.03}},"error":"SQLITE_ERROR: no such function: NOW","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"POST","path":"/api/v1/orders","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: no such function: NOW\n--> in Database#all('\\n' +\n  '        INSERT INTO orders (\\n' +\n  '          id, order_id, external_order_id, restaurant_id, idempotency_key,\\n' +\n  '          customer_name, customer_phone, customer_email,\\n' +\n  '          order_type, order_time, requested_time,\\n' +\n  '          subtotal, tax, tip, discount, delivery_fee, total,\\n' +\n  '          payment_method, payment_status, payment_transaction_id,\\n' +\n  '          notes, status, created_at, updated_at\\n' +\n  '        ) VALUES (\\n' +\n  '          $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, NOW(), NOW()\\n' +\n  '        ) RETURNING *\\n' +\n  '      ', [], [Function (anonymous)])\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:24:8\n    at new Promise (<anonymous>)\n    at query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:23:10)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:71:14)\n    at OrderService.createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\orderService.js:29:40)\n    at async createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\orderController.js:56:21)","timestamp":"2025-10-09 08:59:42","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:12:12","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:12:12"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:12:12"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Failed to get menu: SQLITE_ERROR: unrecognized token: \":\"","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: unrecognized token: \":\"\n--> in Database#all('\\n' +\n  '        SELECT \\n' +\n  '          m.*,\\n' +\n  '          COALESCE(\\n' +\n  '            json_agg(\\n' +\n  '              json_build_object(\\n' +\n  \"                'id', mi.id,\\n\" +\n  \"                'name', mi.name,\\n\" +\n  \"                'price', mi.price,\\n\" +\n  \"                'available', mi.available\\n\" +\n  '              )\\n' +\n  '            ) FILTER (WHERE mi.id IS NOT NULL),\\n' +\n  \"            '[]'::json\\n\" +\n  '          ) as items\\n' +\n  '        FROM menus m\\n' +\n  '        LEFT JOIN menu_items mi ON m.id = mi.menu_id AND mi.available = true\\n' +\n  '       WHERE m.restaurant_id = $1\\n' +\n  '        GROUP BY m.id, m.restaurant_id, m.name, m.description, m.version, m.last_updated, m.created_at\\n' +\n  '        ORDER BY m.restaurant_id, m.name\\n' +\n  '      ', [ 'NYC-DELI-001' ], [Function (anonymous)])\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:24:8\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:23:10)\n    at MenuService.getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\menuService.js:38:37)\n    at getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\menuController.js:15:38)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:84:5\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-10-09 09:12:12"}
{"body":{},"error":"SQLITE_ERROR: unrecognized token: \":\"","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"GET","path":"/api/v1/menu","service":"pos-order-gateway-api","stack":"Error: SQLITE_ERROR: unrecognized token: \":\"\n--> in Database#all('\\n' +\n  '        SELECT \\n' +\n  '          m.*,\\n' +\n  '          COALESCE(\\n' +\n  '            json_agg(\\n' +\n  '              json_build_object(\\n' +\n  \"                'id', mi.id,\\n\" +\n  \"                'name', mi.name,\\n\" +\n  \"                'price', mi.price,\\n\" +\n  \"                'available', mi.available\\n\" +\n  '              )\\n' +\n  '            ) FILTER (WHERE mi.id IS NOT NULL),\\n' +\n  \"            '[]'::json\\n\" +\n  '          ) as items\\n' +\n  '        FROM menus m\\n' +\n  '        LEFT JOIN menu_items mi ON m.id = mi.menu_id AND mi.available = true\\n' +\n  '       WHERE m.restaurant_id = $1\\n' +\n  '        GROUP BY m.id, m.restaurant_id, m.name, m.description, m.version, m.last_updated, m.created_at\\n' +\n  '        ORDER BY m.restaurant_id, m.name\\n' +\n  '      ', [ 'NYC-DELI-001' ], [Function (anonymous)])\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:24:8\n    at new Promise (<anonymous>)\n    at Object.query (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:23:10)\n    at MenuService.getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\menuService.js:38:37)\n    at getMenu (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\menuController.js:15:38)\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\middleware\\auth.js:84:5\n    at Layer.handle [as handle_request] (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-10-09 09:12:12","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:17:51"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:17:51"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:17:51"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:17:51"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:17:51"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:05"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:05"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:18"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:18"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:18"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:18"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:18"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:36"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:42:36"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:15"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:15"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:15"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:15"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:15"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:15","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:38","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:38"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 09:45:38"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:05:17","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:05:17"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:05:17"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:05:42","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:05:42"}
{"client":"Mobile App","externalOrderId":"TEST-002","itemCount":1,"level":"info","message":"Creating order ORD-20241009-002","orderId":"ORD-20241009-002","orderType":"pickup","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:05:42","total":14.03}
{"__augmented":true,"code":"SQLITE_CONSTRAINT","errno":19,"level":"error","message":"Failed to create order: SQLITE_CONSTRAINT: NOT NULL constraint failed: order_items.order_id","service":"pos-order-gateway-api","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: order_items.order_id\n--> in Statement#run([\n  '1aea3cb3-4fb1-47c4-b2bf-6f77dd609df6',\n  undefined,\n  'SANDWICH-001',\n  'Turkey Club',\n  1,\n  12.99,\n  12.99,\n  null\n], [Function (anonymous)])\n    at Database.<anonymous> (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\sqlite3\\lib\\sqlite3.js:76:19)\n    at Database.<anonymous> (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\sqlite3\\lib\\sqlite3.js:20:19)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:36:8\n    at new Promise (<anonymous>)\n    at Object.run (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:35:10)\n    at OrderService.createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\orderService.js:66:43)\n    at async createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\orderController.js:56:21)","timestamp":"2025-10-09 10:05:42"}
{"body":{"customer":{"name":"Test Customer","phone":"555-0123"},"externalOrderId":"TEST-002","items":[{"itemId":"SANDWICH-001","name":"Turkey Club","quantity":1,"totalPrice":12.99,"unitPrice":12.99}],"orderId":"ORD-20241009-002","orderTime":"2025-10-09T10:05:42Z","orderType":"pickup","restaurantId":"NYC-DELI-001","totals":{"subtotal":12.99,"tax":1.04,"total":14.03}},"error":"SQLITE_CONSTRAINT: NOT NULL constraint failed: order_items.order_id","ip":"::ffff:127.0.0.1","level":"error","message":"API Error:","method":"POST","path":"/api/v1/orders","service":"pos-order-gateway-api","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: order_items.order_id\n--> in Statement#run([\n  '1aea3cb3-4fb1-47c4-b2bf-6f77dd609df6',\n  undefined,\n  'SANDWICH-001',\n  'Turkey Club',\n  1,\n  12.99,\n  12.99,\n  null\n], [Function (anonymous)])\n    at Database.<anonymous> (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\sqlite3\\lib\\sqlite3.js:76:19)\n    at Database.<anonymous> (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\node_modules\\sqlite3\\lib\\sqlite3.js:20:19)\n    at D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:36:8\n    at new Promise (<anonymous>)\n    at Object.run (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\config\\database-sqlite.js:35:10)\n    at OrderService.createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\services\\orderService.js:66:43)\n    at async createOrder (D:\\Software\\Dmitri\\Working\\POS_Mobile\\Git\\POSSyncAgent\\API\\src\\controllers\\orderController.js:56:21)","timestamp":"2025-10-09 10:05:42","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:23:45"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:23:45"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:23:45"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:23:45"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:23:45"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:07","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:07"}
{"client":"Mobile App","externalOrderId":"TEST-003","itemCount":1,"level":"info","message":"Creating order ORD-20241009-003","orderId":"ORD-20241009-003","orderType":"pickup","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:07","total":14.03}
{"level":"info","message":"Order record created with internal ID: 0d93de99-d2a6-4900-802f-ef93e0da88bf","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:07"}
{"level":"info","message":"Order created successfully: ORD-20241009-003","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:07"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:23","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:23"}
{"client":"Mobile App","externalOrderId":"TEST-004","itemCount":1,"level":"info","message":"Creating order ORD-20241009-004","orderId":"ORD-20241009-004","orderType":"delivery","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:23","total":31.32}
{"level":"info","message":"Order record created with internal ID: a4c0bfb8-8e1d-436f-bd5f-e1e547b489df","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:23"}
{"level":"info","message":"Order created successfully: ORD-20241009-004","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:24:23"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders/ORD-20241009-004","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:29:51","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20241009-004","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:29:51"}
{"client":"Mobile App","level":"info","message":"Retrieving order ORD-20241009-004","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:29:51"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"PUT /api/v1/orders/ORD-20241009-004/status","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:30:10","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"POS Sync Agent","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20241009-004/status","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:30:10"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:30:18","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:30:27","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders/ORD-20241009-004/status","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:30:48","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20241009-004/status","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:30:48"}
{"client":"Mobile App","level":"info","message":"Retrieving order status ORD-20241009-004","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:30:48"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders/ORD-20241009-003/cancel","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:00","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"POS Sync Agent","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20241009-003/cancel","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:00"}
{"client":"POS Sync Agent","ip":"::ffff:127.0.0.1","level":"warn","message":"Authorization failed: Insufficient permissions","path":"/ORD-20241009-003/cancel","requiredPermission":"orders:create","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:00","userPermissions":["orders:update","status:webhook"]}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders/ORD-20241009-003/cancel","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:18","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20241009-003/cancel","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:18"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders/ORD-20241009-003/cancel","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:56","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20241009-003/cancel","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:56"}
{"client":"Admin Dashboard","level":"info","message":"Cancelling order ORD-20241009-003","notes":"Customer called to cancel order due to change in plans","reason":"customer_request","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:56"}
{"level":"info","message":"Order ORD-20241009-003 cancelled - reason: customer_request","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:56"}
{"level":"info","message":"Status change notification: ORD-20241009-003 -> cancelled","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:31:56"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders/ORD-20241009-003/status","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:32:31","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20241009-003/status","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:32:31"}
{"client":"Mobile App","level":"info","message":"Retrieving order status ORD-20241009-003","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:32:31"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:50:44","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 10:50:44"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:24"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:24"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:24"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:24"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:24"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:26","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:26","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:26","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:26"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:43:26"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:09"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:09"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:09"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:09"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:09"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:11","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:11","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:11","userAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.22000.65"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:11"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:11"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:18","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /favicon.ico","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:18","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:31","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:46","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":"Authentication failed: No API key provided","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-09 18:53:46","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:06:44"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:06:45"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:06:45"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:06:45"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:06:45"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:07:46","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:08:02","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:08:55","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":"Authentication failed: No API key provided","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:08:55","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:09:35","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:09:35"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:09:35"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:14:46"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:14:46"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:15:00"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:15:00"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:15:00"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:15:00"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:15:00"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:15:14","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:15:41","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:16:37","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:16:37"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:16:37"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:19:38","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:19:38"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:20:48","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:20:48"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:21:32","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:21:32"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:21:49","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:21:49"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:22:10","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:22:10"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:25:07"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:25:07"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:31:05"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:31:05"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:31:05"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:31:05"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:31:05"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:31:29","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:31:44","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:32:37","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:32:37"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:32:37"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:34:02"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:34:02"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:34:51"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:34:51"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:34:51"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:34:51"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:34:51"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:35:00","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:35:12","userAgent":"PostmanRuntime/7.48.0"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:35:44","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:35:44"}
{"client":"Mobile App","level":"info","message":"Retrieving menu","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:35:44"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:37:30","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:37:30"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:02","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:02"}
{"client":"Mobile App","externalOrderId":"POSTMAN-TEST-001","itemCount":2,"level":"info","message":"Creating order ORD-20251010-001","orderId":"ORD-20251010-001","orderType":"delivery","restaurantId":"NYC-DELI-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:02","total":40.28}
{"level":"info","message":"Order record created with internal ID: 4e06255f-2760-4e86-b2ad-d7674001801a","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:02"}
{"level":"info","message":"Order created successfully: ORD-20251010-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:02"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders/ORD-20251010-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:49","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Mobile App","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20251010-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:49"}
{"client":"Mobile App","level":"info","message":"Retrieving order ORD-20251010-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:38:49"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"PATCH /api/v1/orders/ORD-20251010-001/status","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:40:12","userAgent":"PostmanRuntime/7.48.0"}
{"client":"POS Sync Agent","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20251010-001/status","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:40:12"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"PATCH /api/v1/orders/ORD-20251010-001/status","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:40:55","userAgent":"PostmanRuntime/7.48.0"}
{"client":"POS Sync Agent","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20251010-001/status","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:40:55"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"PUT /api/v1/orders/ORD-20251010-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:43:10","userAgent":"PostmanRuntime/7.48.0"}
{"client":"POS Sync Agent","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/ORD-20251010-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:43:10"}
{"client":"POS Sync Agent","level":"info","message":"Updating order ORD-20251010-001","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:43:10","updates":{"notes":"Order received by kitchen","status":"preparing"}}
{"level":"info","message":"Order ORD-20251010-001 status updated to preparing","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:43:10"}
{"level":"info","message":"Status change notification: ORD-20251010-001 -> preparing","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:43:10"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:43:55","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:43:55"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:07","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:07"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:08","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:08"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:13"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:13"}
{"level":"info","message":"🚀 Order Gateway API started on port 3000","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:17"}
{"level":"info","message":"📖 API Documentation: http://localhost:3000/api","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:17"}
{"level":"info","message":"💓 Health Check: http://localhost:3000/health","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:17"}
{"level":"info","message":"🌍 Environment: development","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:17"}
{"level":"info","message":"🗄️ Connected to SQLite database","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:17"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/orders","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:23","userAgent":"PostmanRuntime/7.48.0"}
{"client":"Admin Dashboard","ip":"::ffff:127.0.0.1","level":"info","message":"Authentication successful","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:23"}
{"client":"Admin Dashboard","level":"info","limit":"5","message":"Retrieving all orders","offset":0,"service":"pos-order-gateway-api","timestamp":"2025-10-10 10:49:23"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"GET /api/v1/menu","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:50:25","userAgent":"PostmanRuntime/7.48.0"}
{"apiKeyPrefix":"invalid-...","ip":"::ffff:127.0.0.1","level":"warn","message":"Authentication failed: Invalid API key","path":"/","service":"pos-order-gateway-api","timestamp":"2025-10-10 10:50:25","userAgent":"PostmanRuntime/7.48.0"}
{"level":"info","message":"Closing SQLite database...","service":"pos-order-gateway-api","timestamp":"2025-10-10 11:05:22"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"pos-order-gateway-api","timestamp":"2025-10-10 11:05:22"}
